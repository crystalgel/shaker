<div class="col-sm-6 col-sm-offset-3">

    <h1>Restaurant Shaker</h1>

    <form action="/result" method="post">
        <div class="form-group">
            <label>Near</label>
            <input type="text" id="location" class="form-control" name="location" placeholder="Current Location">
        </div>
        <div class="form-group">
          <label>Find</label>
            <input type="text" id="term" class="form-control" name="term">
        </div>
          <input type="hidden" id="cll" class="form-control" name="cll">

        <div class="form-group cuisines-container">
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="newamerican"> American (New)
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="tradamerican"> American (Traditional)
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options"
            value="asianfusion"> Asian Fusion
          </label>

          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="breakfast_brunch"> Breakfast and Brunch
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="buffets"> Buffets
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="chinese"> Chinese
            </label>
            <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="french"> French
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="german"> German
          </label>

            <label class="form-control">
              <input type="checkbox" name="cuisines" class="cuisines-options" value="gluten_free"> Gluten-Free
            </label>
            <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="greek"> Greek
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="italian"> Italian
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="japanese"> Japanese
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="korean"> Korean
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="latin"> Latin
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="malaysian"> Malaysian
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="mediterranean"> Mediterranean
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="mexican"> Mexican
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="mideastern"> Middle Eastern
          </label><label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="polish"> Polish
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="portugese"> Portugese
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="salad"> Salad
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="spanish"> Spanish
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="taiwanese"> Taiwanese
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="thai"> Thai
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="vegan"> Vegan
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="vegetarian"> Vegetarian
          </label>
          <label class="form-control">
            <input type="checkbox" name="cuisines" class="cuisines-options" value="vietnamese"> Vietnamese
          </label>
        </div>

        <button type="submit" id="shake" class="btn btn-warning btn-lg">Shake!</button>
    </form>

</div>

<script>
 $.ajax({
   url: '//freegeoip.net/json/',
   type: 'POST',
   dataType: 'jsonp',
   success: function(location) {
     current = location.city,
     $('#cll').val(location.longitude.toString() + "," + location.latitude.toString())
   }
 });


$('#shake').click(function(){
  if ($('#location').val() === "") {
    $('#location').val(current)
  }
});

</script>
